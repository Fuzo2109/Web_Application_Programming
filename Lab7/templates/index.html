<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Management</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h1>Student Management Dashboard</h1>

  <div class="nav">
    <a href="/add">Add Student</a>
    <a href="/calculate-gpa">Calculate GPA</a>
    <a href="/classify">Classify Rank</a>
    <a href="/excellent">Excellent Students</a>
    <a href="/top-student">Top Student</a>
    <a href="/count-major">Count by Major</a>
  </div>

  <form class="search-bar" method="GET" action="/search">
    <input type="text" name="name" placeholder="Search exact name...">
    <button type="submit">Search</button>
  </form>

  <form class="search-bar" method="GET" action="/fuzzy">
    <input type="text" name="q" placeholder="Fuzzy search name...">
    <button type="submit">Search</button>
  </form>

  <form class="search-bar" method="GET" action="/filter/major">
    <select name="major">
      <option disabled selected>Choose major</option>
      <option value="IT">IT</option>
      <option value="Business">Business</option>
      <option value="Design">Design</option>
    </select>
    <button type="submit">Filter</button>
  </form>

  <form class="search-bar" method="GET" action="/gender">
    <select name="gender">
      <option disabled selected>Choose gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>
    <button type="submit">Filter</button>
  </form>

  <form class="search-bar" method="GET" action="/age-range">
    <input type="number" name="min" placeholder="Min Age">
    <input type="number" name="max" placeholder="Max Age">
    <button type="submit">Filter by Age</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Major</th>
        <th>Math</th>
        <th>Literature</th>
        <th>English</th>
        <th>GPA</th>
        <th>Rank</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in students %}
      <tr>
        <td>{{ s.name }}</td>
        <td>{{ s.age }}</td>
        <td>{{ s.gender }}</td>
        <td>{{ s.major }}</td>
        <td>{{ s.math if s.math else '-' }}</td>
        <td>{{ s.literature if s.literature else '-' }}</td>
        <td>{{ s.english if s.english else '-' }}</td>
        <td>{{ s.gpa if s.gpa else '-' }}</td>
        <td>{{ s.rank if s.rank else '-' }}</td>
        <td>
          <a href="/edit/{{ s._id }}"> Edit</a> |
          <a href="/edit-scores/{{ s._id }}"> Scores</a> |
          <a href="/delete/{{ s._id }}" onclick="return confirm('Delete this student?')"> Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>